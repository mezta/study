var initScrollbar=function(){$("#dealer-list-container").perfectScrollbar({wheelPropagation:!0})},resizeModal=function(a){var t=0,i=$(window).height(),n=parseInt(80*i/100);$(a).hasClass("exclude-height")?(n=parseInt($(a).attr("data-fix-height")),$(a).find(".modal-dialog").css({"margin-top":parseInt((i-n)/2)+"px"})):$(a).find(".modal-dialog").css({height:n+"px","margin-top":parseInt(10*i/100)+"px"});var o=$(a).find(".modal-header"),e=parseInt(o.height())+parseInt(o.css("padding-top").replace("px",""))+parseInt(o.css("padding-bottom").replace("px",""));$(a).hasClass("exclude-height")||(t=n-60-e,$(a).find(".modal-body").css({height:t+"px"}))},initModalVideo=function(){$(".modal-video").each(function(){$(this).click(function(){$(".video-container video").trigger("pause");var i=null,n=$(this).attr("data-video-src"),o=$(this).attr("data-video-poster");$("#modalVideo").on("show.bs.modal",function(){resizeModal("#modalVideo")}).on("shown.bs.modal",function(a){var t=$(this);i=t.find("video"),$(i).attr("src",n).attr("poster",o),i.trigger("play")}).on("hidden.bs.modal",function(){$(i).attr("src",""),i.trigger("pause")}).modal()})})},initModalQuality=function(){$("#btnQuality").click(function(){$("#qualityTable").on("show.bs.modal",function(a){resizeModal("#qualityTable");var t=$("#qualityTable .modal-body").height();$("#quality-table-container").css("height",parseInt(t-20)+"px")}).on("shown.bs.modal",function(){$("#quality-table-container").perfectScrollbar({wheelPropagation:!0})}).modal()})},initModalProtection=function(){$("#btnProtection").click(function(){$("#protectionTable").on("show.bs.modal",function(a){resizeModal("#protectionTable");var t=$("#protectionTable .modal-body").height();$("#protection-table-container").css("height",parseInt(t-20)+"px")}).on("shown.bs.modal",function(){$("#protection-table-container").perfectScrollbar({wheelPropagation:!0})}).modal()})},initFaqModal=function(){$(".faq-list-item a").each(function(){$(this).click(function(){var a=$("#modalFaq"),t=$(this).attr("data-control-id"),i=$(this).attr("data-control-popularity"),n=$(this).parent().find(".hdQ").eq(0).text(),o=$(this).parent().find(".hdA").eq(0).html();$("#modalFaq").on("show.bs.modal",function(){a.find("#faqQuestion").text(n),a.find("#faqAnswer").html(o),a.find(".popularity-info a").html("<small>"+i+"</small>"),a.find(".popularity").attr("data-popularity-id",t),a.find(".trigger-popularity").each(function(){$(this).click(function(){a.find(".popularity-info a.popularity").click()})}),resizeModal("#modalFaq")}).on("shown.bs.modal",function(){$("#faq-detail-container").perfectScrollbar({wheelPropagation:!0})}).on("hidden.bs.modal",function(){}).modal()})})},initFilter=function(){$(".toggle-faq-category a").each(function(){$(this).click(function(){var a=$(this).parent("li");if(!a.hasClass("active")){$("#hdIndex").val(1);var t=$(".toggle-faq-category .active");t&&(t.find("img").attr("src",t.find("img").attr("data-img-off")),t.removeClass("active")),a.addClass("active"),bindFaqSearch(!0)}})})},bindFaqSearch=function(){var a=$("#txtKeyword").val(),t="";0<$(".toggle-faq-category .active a").length&&(t=$(".toggle-faq-category .active a").eq(0).attr("data-control"));var i=$("#hdIndex").val(),n=$(".faq-list");n.empty(),$.get("/umbraco/Surface/tas/searchFaq",{nid:$("#nid").val(),keyword:encodeURIComponent(a),category:encodeURIComponent(t),p:i},function(a){if(0<parseInt(a.total)){for(var t=0;t<a.data.length;t++){var i='<div class="faq-list-item clearfix">';i+='<a data-control-id="'+a.data[t].id+'" data-control-popularity="'+a.data[t].popularity+'" class="pull-right bar" href="javascript:;">&nbsp;</a>',i+='<a data-control-id="'+a.data[t].id+'" data-control-popularity="'+a.data[t].popularity+'" class="normal" href="javascript:;">',i+="Q:"+a.data[t].question,a.data[t].isStick&&(i+='<span class="hegii-icon-essence"><img src="/assets//images/temp/tas/icon.png" class="img-responsive"></span>'),i+="</a>",i+='<div class="hdQ">Q:'+a.data[t].question+"</div>",i+='<div class="hdA">A:'+a.data[t].answer+"</div>",i+="</div>",n.append(i)}initFaqModal(),refreshPagination(parseInt(a.total),10,10,function(){bindPagination(bindPage)})}},"JSON")},bindPage=function(a){bindFaqSearch()};$(function(){"btnQuality"===$("#btnQuality").attr("id")&&(initModalQuality(),initModalProtection()),$(".faq").hasClass("faq")&&(initFilter(),initFaqModal(),bindPagination(bindPage),$("#txtKeyword").keyup(function(a){13===parseInt(event.keyCode)&&$("#btnSearch").click()}),$("#btnSearch").click(function(){$("#hdIndex").val(1),bindFaqSearch(!0)})),initModalVideo()});